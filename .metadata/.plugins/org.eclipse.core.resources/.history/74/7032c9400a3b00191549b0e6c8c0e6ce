package accounts;

import java.text.StringCharacterIterator;
import java.util.Iterator;
import java.util.function.BooleanSupplier;

import Names.Name;
import Names.NameBag;
import Names.NameWarehouse;

public class UserAccountFactory {
	private NameWarehouse names;
	private AccountBag accountBag;
	private Iterator<Name> it;
	private Name n;
	private static int idCounter = 0;
	
	public UserAccountFactory() {
		
	}
	
	public UserAccountFactory(NameWarehouse names) {
		it = names.getNb().getNames().iterator();
		this.names = names;
		n = it.next();
		accountBag = new AccountBag();
	}
	public String emitUserName() {
		return n.getLastName().substring(0, 2).toLowerCase() + n.getFirstName().charAt(0) + String.valueOf(idCounter).charAt(String.valueOf(idCounter).length()-1);
		
	}
	public String emitUserPassword() {
		String password = "";
		boolean meetsRequirements = true;
		String characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz !\\\"#$%&'()*+,-./:;<=>?@[\\\\]^_`{|}~";
		StringCharacterIterator it = new StringCharacterIterator(password);
		do {
			password += String.valueOf(characters.charAt((int) (Math.random() * characters.length())));
			if(password.length() >= 8) {
				meetsRequirements = false;
			}
			
		}while( meetsRequirements);
		return password;
		
	}
	public String emitUserId() {
		
		return String.valueOf(++idCounter);
	}
	public String emitFirstName() {
		
		return n.getFirstName();
	}
	public String emitLastName() {
		return n.getLastName();
	}
	public char emitGender() {
		return n.getGender();
	}
	public void emitUserAccount() {
		UserAccount ua = new UserAccount(emitFirstName(),emitLastName(),emitUserId(), emitGender(),emitUserName(),emitUserPassword());
		accountBag.insert(ua);
		n = it.next();
		System.out.print("");
		
	}
	public AccountBag getAccountBag() {
		return accountBag;
	}
	public void setAccountBag(AccountBag accountBag) {
		this.accountBag = accountBag;
	}
	public Boolean hasLowerCase(String password) {
	for(int i = 0; i < password.length(); i++) {
		if()
	}
	}
	
	
	
}

